<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/_next/static/css/e8febeb6730d7a7bce46.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e8febeb6730d7a7bce46.css" data-n-g=""/><link rel="preload" href="/_next/static/css/8189cb58e298e1a5e388.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8189cb58e298e1a5e388.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.c4db113d6ae1605f54bb.js" as="script"/><link rel="preload" href="/_next/static/chunks/f6078781a05fe1bcb0902d23dbbb2662c8d200b3.3017f9b6be27c667c533.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-c129779407ff225e84bd.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-296f3014e90507873ea9.js" as="script"/><link rel="preload" href="/_next/static/chunks/1df474da.d95f8884482661656c51.js" as="script"/><link rel="preload" href="/_next/static/chunks/1bb37dfa4a3d16451abcd7ba6f75b92f45ed2736.23a21b264878a7c00596.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/%5Bid%5D-41af1dbfc4675f634447.js" as="script"/></head><body><div id="__next"><div class=".app"><div class="styles_header__2KtfL"><div class="styles_logo__KwRGz"><a href="/"><img alt="logo" src="/logo.svg"/></a></div></div><div class="content"></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"dir":"553-hard-deep-object-to-unique","id":"553","challenge":"hard","info":{"difficulty":"hard","title":"Deep object to unique","tags":"deep","author":{"github":"uid11","name":null}},"prefix":"\u003c!--info-header-start--\u003e\u003ch1\u003eDeep object to unique \u003cimg src=\"https://img.shields.io/badge/-hard-de3d37\" alt=\"hard\"/\u003e \u003cimg src=\"https://img.shields.io/badge/-%23deep-999\" alt=\"#deep\"/\u003e\u003c/h1\u003e\u003cblockquote\u003e\u003cp\u003eby null \u003ca href=\"https://github.com/uid11\" target=\"_blank\"\u003e@uid11\u003c/a\u003e\u003c/p\u003e\u003c/blockquote\u003e\u003cp\u003e\u003ca href=\"https://tsch.js.org/553/play\" target=\"_blank\"\u003e\u003cimg src=\"https://img.shields.io/badge/-Take%20the%20Challenge-3178c6?logo=typescript\u0026logoColor=white\" alt=\"Take the Challenge\"/\u003e\u003c/a\u003e \u0026nbsp;\u0026nbsp;\u0026nbsp;\u003ca href=\"./README.ja.md\" target=\"_blank\"\u003e\u003cimg src=\"https://img.shields.io/badge/-%E6%97%A5%E6%9C%AC%E8%AA%9E-gray\" alt=\"日本語\"/\u003e\u003c/a\u003e \u003c/p\u003e\u003c!--info-header-end--\u003e\n\nTypeScript has structural type system, but sometimes you want a function to accept only some previously well-defined unique objects (as in the nominal type system), and not any objects that have the required fields.\r\n\r\nCreate a type that takes an object and makes it and all deeply nested objects in it unique, while preserving the string and numeric keys of all objects, and the values of all properties on these keys.\r\n\r\nThe original type and the resulting unique type must be mutually assignable, but not identical. \r\n\r\nFor example,\r\n\r\n```ts\r\nimport { Equal } from \"@type-challenges/utils\"\r\n\r\ntype Foo = { foo: 2; bar: { 0: 1 }; baz: { 0: 1 } }\r\n\r\ntype UniqFoo = DeepObjectToUniq\u003cFoo\u003e\r\n\r\ndeclare let foo: Foo\r\ndeclare let uniqFoo: UniqFoo\r\n\r\nuniqFoo = foo // ok\r\nfoo = uniqFoo // ok\r\n\r\ntype T0 = Equal\u003cUniqFoo, Foo\u003e // false\r\ntype T1 = UniqFoo[\"foo\"] // 2\r\ntype T2 = Equal\u003cUniqFoo[\"bar\"], UniqFoo[\"baz\"]\u003e // false\r\ntype T3 = UniqFoo[\"bar\"][0] // 1\r\ntype T4 = Equal\u003ckeyof Foo \u0026 string, keyof UniqFoo \u0026 string\u003e // true\r\n```\n\n\n\u003c!--info-footer-start--\u003e\u003cbr\u003e\u003ca href=\"../../README.md\" target=\"_blank\"\u003e\u003cimg src=\"https://img.shields.io/badge/-Back-grey\" alt=\"Back\"/\u003e\u003c/a\u003e \u003ca href=\"https://tsch.js.org/553/answer\" target=\"_blank\"\u003e\u003cimg src=\"https://img.shields.io/badge/-Share%20your%20Solutions-teal\" alt=\"Share your Solutions\"/\u003e\u003c/a\u003e \u003ca href=\"https://tsch.js.org/553/solutions\" target=\"_blank\"\u003e\u003cimg src=\"https://img.shields.io/badge/-Check%20out%20Solutions-de5a77?logo=awesome-lists\u0026logoColor=white\" alt=\"Check out Solutions\"/\u003e\u003c/a\u003e \u003c!--info-footer-end--\u003e","suffix":"import { Equal, IsTrue, IsFalse } from \"@type-challenges/utils\"\r\n\r\ntype Quz = { quz: 4 }\r\n\r\ntype Foo = { foo: 2; baz: Quz; bar: Quz }\r\ntype Bar = { foo: 2; baz: Quz; bar: Quz \u0026 { quzz?: 0 } }\r\n\r\ntype UniqFoo = DeepObjectToUniq\u003cFoo\u003e\r\ntype UniqBar = DeepObjectToUniq\u003cBar\u003e\r\n\r\ndeclare let foo: Foo\r\ndeclare let uniqFoo: UniqFoo\r\n\r\nuniqFoo = foo\r\nfoo = uniqFoo\r\n\r\ntype cases = [\r\n  IsFalse\u003cEqual\u003cUniqFoo, Foo\u003e\u003e,\r\n  IsTrue\u003cEqual\u003cUniqFoo[\"foo\"], Foo[\"foo\"]\u003e\u003e,\r\n  IsTrue\u003cEqual\u003cUniqFoo[\"bar\"][\"quz\"], Foo[\"bar\"][\"quz\"]\u003e\u003e,\r\n  IsFalse\u003cEqual\u003cUniqFoo[\"bar\"], UniqFoo[\"baz\"]\u003e\u003e,\r\n  IsFalse\u003cEqual\u003cUniqBar[\"baz\"], UniqFoo[\"baz\"]\u003e\u003e,\r\n  IsTrue\u003cEqual\u003ckeyof UniqBar[\"baz\"], keyof UniqFoo[\"baz\"]\u003e\u003e,\r\n  IsTrue\u003cEqual\u003ckeyof Foo, keyof UniqFoo \u0026 string\u003e\u003e\r\n];\n","content":"type DeepObjectToUniq\u003cO extends object\u003e = any\n"},"__N_SSG":true},"page":"/[id]","query":{"id":"553-hard-deep-object-to-unique"},"buildId":"FVytLnfykEFUb3IIfKAt8","isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-076e78994db3acc22a9f.js"></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.c4db113d6ae1605f54bb.js" async=""></script><script src="/_next/static/chunks/f6078781a05fe1bcb0902d23dbbb2662c8d200b3.3017f9b6be27c667c533.js" async=""></script><script src="/_next/static/chunks/main-c129779407ff225e84bd.js" async=""></script><script src="/_next/static/chunks/pages/_app-296f3014e90507873ea9.js" async=""></script><script src="/_next/static/chunks/1df474da.d95f8884482661656c51.js" async=""></script><script src="/_next/static/chunks/1bb37dfa4a3d16451abcd7ba6f75b92f45ed2736.23a21b264878a7c00596.js" async=""></script><script src="/_next/static/chunks/pages/%5Bid%5D-41af1dbfc4675f634447.js" async=""></script><script src="/_next/static/FVytLnfykEFUb3IIfKAt8/_buildManifest.js" async=""></script><script src="/_next/static/FVytLnfykEFUb3IIfKAt8/_ssgManifest.js" async=""></script></body></html>